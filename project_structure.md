### 项目根目录 (ai-eng-learn)

```
/ai-eng-learn
|-- manifest.json       # 插件的核心配置文件
|-- background.js       # 背景脚本，处理API通信
|-- content.js          # 内容脚本，注入到网页中
|-- popup/              # 弹出窗口的UI和逻辑
|-- history/            # 历史记录页面的UI和逻辑
|-- icons/              # 插件图标
|-- plan.md             # 技术文档
|-- 需求文档.md         # 原始需求文档
```

---

### 1. manifest.json

这是整个插件的“大脑”，一个必需的配置文件。它告诉浏览器：
*   **插件名称、版本、描述**: 基本信息。
*   **权限 (`permissions`)**: 插件需要访问哪些浏览器功能。我们申请了`storage`（用于本地存储历史记录）、`activeTab`和`scripting`（用于在当前页面上操作，比如注入悬浮按钮）。
*   **背景脚本 (background.js)**: 指定了在后台持续运行的脚本。这是处理与Gemini API通信的理想位置。
*   **内容脚本 (content.js)**: 指定了需要注入到网页中的脚本。我们将用它来创建悬浮按钮。
*   **用户界面 (`action`)**: 定义了用户点击浏览器工具栏图标时会发生什么。在这里，它会打开popup.html。
*   **图标 (icons)**: 定义了插件在不同地方显示的图标。

---

### 2. popup 目录 (弹出窗口)

当用户点击浏览器工具栏上的插件图标时，会显示这个弹出窗口。

*   **`popup.html`**: 定义了弹出窗口的结构。它包含一个用于输入10个单词的表单、一个“提交”按钮和一个“查看历史”按钮。
*   **`popup.css`**: 为弹出窗口提供样式，使其看起来更美观。
*   **`popup.js`**: 这是弹出窗口的“心脏”。
    *   **功能**:
        1.  动态创建10个输入框。
        2.  监听“提交”按钮的点击事件。
        3.  当用户提交时，收集所有输入框中的单词。
        4.  将这些单词发送给背景脚本 (background.js) 进行处理。
        5.  接收从背景脚本返回的Gemini结果并显示在弹出窗口中。
        6.  处理“查看历史”按钮的点击，可能会打开history.html页面。

---

### 3. background.js (背景脚本)

这个脚本在后台运行，独立于任何网页。

*   **功能**:
    1.  监听来自`popup.js`的消息（即用户输入的10个单词）。
    2.  接收到单词后，将它们与一个预设的、固定的提示词组合起来。
    3.  向Gemini的大模型API发送网络请求。
    4.  接收到API的响应后，将其发送回`popup.js`以供显示。
    5.  处理历史记录的保存，将查询和结果存入浏览器的`localStorage`中。

---

### 4. content.js (内容脚本)

这个脚本会被注入到用户访问的几乎所有网页中。

*   **功能**:
    1.  在网页的右下角创建一个悬浮按钮。
    2.  为这个按钮添加点击事件，当用户点击时，通知插件打开`popup.html`。
    3.  （可选）监听键盘快捷键，实现通过快捷键打开弹出窗口的功能。

---

### 5. history 目录 (历史记录页面)

这是一个独立的页面，用于展示用户的查询历史。

*   **`history.html`**: 定义了历史记录页面的结构，包括一个用于显示历史列表的区域和一个“清除历史”按钮。
*   **`history.css`**: 为历史记录页面提供样式。
*   **`history.js`**:
    *   **功能**:
        1.  当页面加载时，从浏览器的`localStorage`中读取所有保存的历史记录。
        2.  将读取到的历史记录动态地显示在`historyList`区域中。
        3.  为“清除历史”按钮添加功能，允许用户清空所有记录。

---

### 6. icons 目录

存放插件在浏览器不同位置（如工具栏、扩展管理页面）显示的 `.png` 图标文件。

这个结构将所有功能清晰地分离开来，使得开发和维护更加容易。